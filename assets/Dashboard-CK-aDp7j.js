import{c as p,o as u,a,t as n,n as R,_ as D,F as y,r as C,b as A,d as x,e as L,w as c,v as d,f as P,g as V,h as E,i as z,j as f,k as M}from"./index-BPA-GSpv.js";import{S as I}from"./sweetalert2.esm.all-BQIkj5Wb.js";const S={class:"text-lg font-bold"},N={class:"text-2xl"},b={__name:"ResumenItem",props:["tipo","cantidad"],setup(m){return(r,l)=>(u(),p("div",{class:R(["p-4 rounded text-center shadow",m.tipo==="Total"?"bg-emerald-100 font-bold":"bg-gray-100"])},[a("h3",S,n(m.tipo==="Total"?"Total del Día":"Holograma "+m.tipo),1),a("p",N,n(m.cantidad),1)],2))}},j={class:"overflow-x-auto"},Z={class:"w-full border border-gray-300 text-sm"},q={class:"px-2 py-2 text-gray-600"},J={class:"px-2 py-2 font-medium text-blue-600"},K={class:"px-2 py-2"},O={class:"px-2 py-2"},Q={class:"px-2 py-2"},W={class:"px-2 py-2"},X={class:"px-2 py-2"},Y={class:"px-2 py-2"},aa={class:"px-2 py-2"},ta={__name:"TablaHologramas",props:["historial","filtros"],setup(m){return(r,l)=>(u(),p("div",j,[a("table",Z,[l[0]||(l[0]=a("thead",null,[a("tr",{class:"bg-gray-100 text-left text-xs uppercase tracking-wide text-gray-600"},[a("th",{class:"px-2 py-2"},"#"),a("th",{class:"px-2 py-2"},"Folio"),a("th",{class:"px-2 py-2"},"Tipo"),a("th",{class:"px-2 py-2"},"Fecha"),a("th",{class:"px-2 py-2"},"Hora Impresión"),a("th",{class:"px-2 py-2"},"Placa"),a("th",{class:"px-2 py-2"},"Tipo Placa"),a("th",{class:"px-2 py-2"},"Combustible"),a("th",{class:"px-2 py-2"},"Técnico")])],-1)),a("tbody",null,[(u(!0),p(y,null,C(m.historial,(t,v)=>(u(),p("tr",{key:t.folio,class:R(v%2===0?"bg-white":"bg-gray-50")},[a("td",q,n(v+1),1),a("td",J,n(t.folio),1),a("td",K,n(t.tipo),1),a("td",O,n(t.fecha),1),a("td",Q,n(t.horaImpresion),1),a("td",W,n(t.placa),1),a("td",X,n(t.tipoPlaca),1),a("td",Y,n(t.combustible),1),a("td",aa,n(t.tecnico),1)],2))),128))])])]))}},oa=D(ta,[["__scopeId","data-v-657a02dc"]]),ea={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},la={class:"bg-white rounded-lg shadow-lg max-w-2xl w-full p-6 relative"},ia={__name:"Modal",setup(m){return(r,l)=>(u(),p("div",ea,[a("div",la,[a("button",{onClick:l[0]||(l[0]=t=>r.$emit("cerrar")),class:"absolute top-2 right-2 text-gray-600 hover:text-red-500 text-xl font-bold"}," × "),A(r.$slots,"default",{},void 0)])]))}},sa=D(ia,[["__scopeId","data-v-2f5ac041"]]),na={class:"p-4"},ca={class:"grid grid-cols-2 gap-3"},ra=["value"],ua=["value"],pa={__name:"FormularioRegistro",setup(m){const r=x(""),l=x(""),t=L({hora:"",nota:"",fechaTicket:"",placaTicket:"",combustible:"",marca:"",tecnico:"",holograma:""}),v=["Toyota","Nissan","Chevrolet","Ford"],_=[{clave:"001",nombre:"Carlos"},{clave:"002",nombre:"Andrea"},{clave:"003",nombre:"Marcos"}];function w(h){const e=h.toUpperCase();return/^[A-Z]{3}/.test(e)?"Particular":/^\d{2}/.test(e)?"Discapacidad":/^[A-Z]{2}/.test(e)?"Carga":"Desconocido"}function $(){l.value=w(r.value)}$();function G(){t.nota==="55555"&&(t.fechaTicket="2025-08-01",t.placaTicket="ABC1234",t.combustible="Gasolina",t.placa!==t.placaTicket&&I.fire({icon:"warning",title:"Placa no coincide",text:`La placa registrada (${t.placa}) no coincide con la del ticket (${t.placaTicket}).`}))}function k(){t.holograma!=="10003"&&I.fire({icon:"warning",title:"Holograma no consecutivo",text:"Se esperaba el holograma 10003. ¿Deseas continuar?",showCancelButton:!0,confirmButtonText:"Sí, continuar",cancelButtonText:"Cancelar"})}function g(){I.fire({icon:"question",title:"¿Confirmar registro?",html:`Placa: <strong>${t.placa}</strong><br>Holograma: <strong>${t.holograma}</strong>`,showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar"}).then(h=>{h.isConfirmed&&I.fire({icon:"success",title:"¡Registro exitoso!",text:"Holograma guardado correctamente."})})}return(h,e)=>(u(),p("div",na,[e[13]||(e[13]=a("h2",{class:"text-xl font-bold mb-4"},"Registrar Holograma",-1)),a("div",ca,[c(a("input",{type:"time","onUpdate:modelValue":e[0]||(e[0]=o=>t.horaLlegada=o),class:"input",placeholder:"Hora Llegada"},null,512),[[d,t.horaLlegada]]),c(a("input",{type:"time","onUpdate:modelValue":e[1]||(e[1]=o=>t.horaImpresion=o),class:"input",placeholder:"Hora Impresión"},null,512),[[d,t.horaImpresion]]),c(a("input",{type:"time","onUpdate:modelValue":e[2]||(e[2]=o=>t.horaEntrega=o),class:"input",placeholder:"Hora Entrega"},null,512),[[d,t.horaEntrega]]),c(a("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>r.value=o),placeholder:"Placa",onInput:$,type:"text",class:"px-3 py-1 border border-slate-400 rounded-md bg-white",required:""},null,544),[[d,r.value]]),a("input",{value:l.value,disabled:"",class:"px-3 py-1 border border-slate-400 rounded-md bg-gray-100 text-gray-700"},null,8,ra),c(a("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=o=>t.nota=o),placeholder:"Nota (ej. 55555)",class:"input",onChange:G},null,544),[[d,t.nota]]),c(a("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=o=>t.fechaTicket=o),class:"input",disabled:""},null,512),[[d,t.fechaTicket]]),c(a("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=o=>t.placaTicket=o),class:"input",disabled:""},null,512),[[d,t.placaTicket]]),c(a("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=o=>t.combustible=o),class:"input",disabled:""},null,512),[[d,t.combustible]]),c(a("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>t.marca=o),class:"input"},[e[11]||(e[11]=a("option",{disabled:"",value:""},"Marca",-1)),(u(),p(y,null,C(v,o=>a("option",{key:o},n(o),1)),64))],512),[[P,t.marca]]),c(a("select",{"onUpdate:modelValue":e[9]||(e[9]=o=>t.tecnico=o),class:"input"},[e[12]||(e[12]=a("option",{value:""},"Todos",-1)),(u(),p(y,null,C(_,o=>a("option",{key:o.clave,value:o.nombre},n(o.nombre),9,ua)),64))],512),[[P,t.tecnico]]),c(a("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=o=>t.holograma=o),placeholder:"Holograma",class:"input",onChange:k},null,544),[[d,t.holograma]])]),a("button",{class:"mt-4 btn",onClick:g},"Guardar")]))}},da=D(pa,[["__scopeId","data-v-22c2e928"]]),ma={class:"p-6 space-y-8"},fa={class:"grid grid-cols-7 gap-3"},ba={class:"flex flex-wrap gap-3 mb-3"},va=["value"],ga={class:"flex justify-end mt-2"},ha={class:"flex gap-1 items-center text-xs"},xa=["disabled"],ya={class:"px-2"},Ca=["disabled"],U=5,_a={__name:"Dashboard",setup(m){const r=x([{folio:10001,tipo:"00",fecha:"2025-08-01",horaImpresion:"08:30",placa:"ABC1234",tipoPlaca:"Particular",combustible:"Gasolina",tecnico:"Lucía"},{folio:10002,tipo:"0",fecha:"2025-08-01",horaImpresion:"09:00",placa:"CD12EF",tipoPlaca:"Discapacidad",combustible:"Diesel",tecnico:"Vicente Guerrero"},{folio:10003,tipo:"Rechazo",fecha:"2025-08-01",horaImpresion:"09:15",placa:"CARG12",tipoPlaca:"Carga",combustible:"Gasolina",tecnico:"Lucía"},{folio:10004,tipo:"1",fecha:"2025-08-01",horaImpresion:"10:00",placa:"ABC5678",tipoPlaca:"Particular",combustible:"Gasolina",tecnico:"Vicente Guerrero"},{folio:10005,tipo:"2",fecha:"2025-08-01",horaImpresion:"10:25",placa:"CD22FF",tipoPlaca:"Discapacidad",combustible:"Diesel",tecnico:"Lucía"},{folio:10006,tipo:"0",fecha:"2025-08-01",horaImpresion:"11:00",placa:"CARG88",tipoPlaca:"Carga",combustible:"Gas LP",tecnico:"Vicente Guerrero"},{folio:10007,tipo:"Rechazo",fecha:"2025-08-01",horaImpresion:"11:30",placa:"ABC9999",tipoPlaca:"Particular",combustible:"Gasolina",tecnico:"Lucía"},{folio:10008,tipo:"00",fecha:"2025-08-01",horaImpresion:"12:00",placa:"CD44ZZ",tipoPlaca:"Discapacidad",combustible:"Diesel",tecnico:"Vicente Guerrero"},{folio:10009,tipo:"1",fecha:"2025-08-01",horaImpresion:"12:30",placa:"CARG44",tipoPlaca:"Carga",combustible:"Gasolina",tecnico:"Lucía"},{folio:10010,tipo:"2",fecha:"2025-08-01",horaImpresion:"13:00",placa:"ABC7777",tipoPlaca:"Particular",combustible:"Gasolina",tecnico:"Vicente Guerrero"}]),l=x({fecha:"",tipo:"",tecnico:""}),t=x(1),v=V(()=>{const o=r.value.filter(T=>{const B=!l.value.fecha||T.fecha===l.value.fecha,H=!l.value.tipo||T.tipo===l.value.tipo,F=!l.value.tecnico||T.tecnico===l.value.tecnico;return B&&H&&F}),i=(t.value-1)*U,s=i+U;return o.slice(i,s)}),_=V(()=>Math.ceil(r.value.filter(o=>{const i=!l.value.fecha||o.fecha===l.value.fecha,s=!l.value.tipo||o.tipo===l.value.tipo,T=!l.value.tecnico||o.tecnico===l.value.tecnico;return i&&s&&T}).length/U));function w(){t.value<_.value&&t.value++}function $(){t.value>1&&t.value--}V(()=>{const o={0:0,"00":0,1:0,2:0,Rechazo:0};return r.value.forEach(i=>{o[i.tipo]!==void 0&&o[i.tipo]++}),o});const G=["0","00","1","2","Rechazo"],k=[{clave:"TEC01",nombre:"17485"},{clave:"TEC02",nombre:"17585"}],g=x(!1),h=V(()=>(r.value.at(-1)?.folio||1e4)+1);function e(o){r.value.push(o),g.value=!1}return(o,i)=>(u(),p("div",ma,[a("div",fa,[f(b,{tipo:"00",cantidad:70}),f(b,{tipo:"0",cantidad:20}),f(b,{tipo:"1",cantidad:0}),f(b,{tipo:"2",cantidad:0}),f(b,{tipo:"Cancelados",cantidad:0}),f(b,{tipo:"Rechazo",cantidad:2}),f(b,{tipo:"Total",cantidad:92})]),a("div",null,[i[10]||(i[10]=a("h2",{class:"text-xl font-semibold mb-2"},"Historial del Día",-1)),a("div",ba,[c(a("input",{type:"date","onUpdate:modelValue":i[0]||(i[0]=s=>l.value.fecha=s),class:"input"},null,512),[[d,l.value.fecha]]),c(a("select",{"onUpdate:modelValue":i[1]||(i[1]=s=>l.value.tipo=s),class:"input"},[i[7]||(i[7]=a("option",{value:""},"Todos",-1)),(u(),p(y,null,C(G,s=>a("option",{key:s},n(s),1)),64))],512),[[P,l.value.tipo]]),c(a("select",{"onUpdate:modelValue":i[2]||(i[2]=s=>l.value.tecnico=s),class:"input"},[i[8]||(i[8]=a("option",{value:""},"Todos",-1)),(u(),p(y,null,C(k,s=>a("option",{key:s.clave,value:s.nombre},n(s.nombre),9,va)),64))],512),[[P,l.value.tecnico]]),c(a("input",{type:"text",placeholder:"Placa","onUpdate:modelValue":i[3]||(i[3]=s=>l.value.placa=s),class:"input"},null,512),[[d,l.value.placa]]),c(a("select",{"onUpdate:modelValue":i[4]||(i[4]=s=>l.value.combustible=s),class:"input"},[i[9]||(i[9]=a("option",{value:""},"Combustible",-1)),(u(!0),p(y,null,C(o.tiposCombustible,s=>(u(),p("option",{key:s},n(s),1))),128))],512),[[P,l.value.combustible]])]),f(oa,{filtros:l.value,historial:v.value},null,8,["filtros","historial"])]),a("div",ga,[a("div",ha,[a("button",{onClick:$,disabled:t.value===1,class:"px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded disabled:opacity-50"}," ← ",8,xa),a("span",ya,"Página "+n(t.value)+" / "+n(_.value),1),a("button",{onClick:w,disabled:t.value===_.value,class:"px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded disabled:opacity-50"}," → ",8,Ca)])]),a("button",{onClick:i[5]||(i[5]=s=>g.value=!0),class:"btn-primary"},"Registrar Holograma"),g.value?(u(),E(sa,{key:0,onCerrar:i[6]||(i[6]=s=>g.value=!1)},{default:M(()=>[f(da,{consecutivo:h.value,tecnicos:k,onRegistroExitoso:e},null,8,["consecutivo"])]),_:1})):z("",!0)]))}},$a=D(_a,[["__scopeId","data-v-c2959053"]]);export{$a as default};
